<div class="settings-page">
  <div class="settings-content">
    <header class="settings-header">
      <h1 class="page-title">Settings</h1>
      <p class="page-subtitle">Manage your account preferences and security settings</p>
    </header>

    <div *ngIf="error()" class="error-banner">
      {{ error() }}
    </div>

    <section class="settings-card" [formGroup]="form">
      <div class="card-header">
        <h2 class="card-title">Security</h2>
      </div>

      <div class="form-grid">
        <div class="field">
          <label class="input-label">Current Password</label>
          <input
            type="password"
            class="input-field"
            formControlName="currentPassword"
            placeholder="••••••••"
          >
        </div>

        <div class="field">
          <label class="input-label">New Password</label>
          <input
            type="password"
            class="input-field"
            formControlName="newPassword"
            placeholder="••••••••"
          >

          <small class="password-hint">
  Password must contain:
  <ul>
    <li [class.valid]="hasMinLength()">At least 8 characters</li>
    <li [class.valid]="hasUppercase()">1 uppercase letter (A–Z)</li>
    <li [class.valid]="hasLowercase()">1 lowercase letter (a–z)</li>
    <li [class.valid]="hasNumber()">1 number (0–9)</li>
    <li [class.valid]="hasSpecial()">1 special character (!@#$%^&*)</li>
  </ul>
</small>

        </div>

        <div class="field">
          <label class="input-label">Confirm New Password</label>
          <input
            type="password"
            class="input-field"
            formControlName="confirmPassword"
            placeholder="••••••••"
          >
          <small
            *ngIf="form.hasError('passwordMismatch') && form.get('confirmPassword')?.dirty"
            class="error-text"
          >
            Passwords do not match.
          </small>
        </div>
      </div>

      <div class="card-footer">
        <button
          type="button"
          class="btn-primary"
          (click)="updatePassword()"
          [disabled]="form.invalid || isUpdatingPassword()"
        >
          {{ isUpdatingPassword() ? 'Updating...' : 'Update Password' }}
        </button>
      </div>
    </section>

    <section class="danger-area">
      <div class="danger-card">
        <div class="danger-text">
          <button
            type="button"
            class="btn-danger"
            (click)="deleteAccount()"
            [disabled]="isDeletingAccount()"
          >
            Delete Account
          </button>
          <span class="danger-desc">
            Once you delete your account, all data will be permanently removed
          </span>
        </div>
      </div>
    </section>
  </div>
</div>
